!function(e){var t=function(e,t,i,r,c){this.settings=c,this.coq=new Coquette(this,e,i,r,this.settings.color_background_fill),this.gameState=null,this.GALAXY={},this.GALAXY.positions={},this.GALAXY.randomSeed=Math.random(),this.GALAXY.debugMode=!1,this.setMessage=function(e,i){var n=i||this.settings.color_text_default;this.GALAXY.text=[{msg:e,col:i}],document.getElementById(t).innerHTML="<p style='color: "+n+"'>"+e+"</p>"},this.appendMessage=function(e,i){var n=i||this.settings.color_text_default;this.GALAXY.text.push({msg:e,col:i}),document.getElementById(t).innerHTML+="<p style='color: "+n+"'>"+e+"</p>"},this.changeGameState=function(e,t){var i=this.coq.entities.all(GamePlayer);void 0===t&&(t={}),void 0!==i[0]&&(this.GALAXY.positions[this.gameState]=i[0].pos),this.gameState=e,void 0!==this.GALAXY.positions[this.gameState]&&(t.storedPlayerPosition=this.GALAXY.positions[this.gameState]),this.setMessage(""),this.coq.entities.clear(),this.coq.renderer.setViewCenter({x:400,y:300}),{"start screen":n,"space ship":a,"game won":o,"game lost":s}[this.gameState](this,t)},this.update=function(){this.coq.inputter.changes(this.coq.inputter.P)&&(this.coq.ticker.stop=!0),this.coq.inputter.changes(this.coq.inputter.O)&&(this.GALAXY.debugMode=!this.GALAXY.debugMode),this.coq.inputter.changes(this.coq.inputter.C)&&this.coq.renderer.setViewCenter(this.coq.renderer.center())},this.getAllBoxSegments=function(){var e=[];return this.coq.entities.all().forEach(function(t){void 0!==t.getLightSegments&&(e=e.concat(t.getLightSegments()))}),e},this.alertOsacians=function(e){var t=this.coq.entities.all(GamePlayer),i=t[0],n=this.coq.entities.all(Osacian);n=n.filter(function(t){return t.team==e});for(var s=0;s<n.length;s++)n[s].noticePlayer(i)}},i=function(e,t,i,n){this.x=e||0,this.y=t||0,this.size=i||1,this.speed=n||0},n=function(e){e.setMessage("Make your way to the escape pods!"),e.appendMessage("Use the number keys (1-8) to choose options."),e.appendMessage("Arrow keys or WASD to move"),e.appendMessage("Click to shoot"),e.coq.entities.create(GameScreen,{init:function(t){e.coq.renderer.setWorldSize({x:800,y:600}),e.coq.renderer.setViewCenter(e.coq.renderer.center()),e.coq.entities.create(GameStartScreen,{},function(e){t.screen=e})},HUD:[{key:1,keyword:"ONE",action:function(){e.changeGameState("space ship")}.bind(this),text:"Start Game",enabled:!0}]}),e.coq.entities.create(GameAnimation,{animation:AnimationWarp})},s=function(e){e.setMessage("You have died."),e.appendMessage("(If the frame rate drops on your next playthrough, try just refreshing the page!)"),e.coq.entities.create(GameScreen,{init:function(){e.coq.renderer.setWorldSize({x:800,y:600}),e.coq.renderer.setViewCenter(e.coq.renderer.center())},HUD:[{key:1,keyword:"ONE",action:function(){e.changeGameState("start screen")}.bind(this),text:"New Game",enabled:!0}]}),e.coq.entities.create(GameAnimation,{animation:AnimationWarp})},o=function(e){e.setMessage("You have made it off the Osacian Ship."),e.appendMessage("Reference this code in your comment: 1"+Math.random().toString().substring(5,8)),e.coq.entities.create(GameScreen,{init:function(){e.coq.renderer.setWorldSize({x:800,y:600}),e.coq.renderer.setViewCenter(e.coq.renderer.center())},HUD:[{key:1,keyword:"ONE",action:function(){e.changeGameState("start screen")}.bind(this),text:"New Game",enabled:!0}]}),e.coq.entities.create(GameAnimation,{animation:AnimationWarp})},a=function(e){e.coq.entities.create(GameScreen,{init:function(t){e.coq.renderer.setWorldSize({x:2400,y:1600}),e.coq.renderer.setViewCenter({x:400,y:300}),e.coq.entities.create(GameSpaceShip,{},function(e){t.screen=e})},HUD:[{key:8,keyword:"EIGHT",action:function(){this.changeGameState("start screen")}.bind(e),text:"Quit",enabled:!0}],player:{pos:function(){return{x:125,y:330}}(),size:{x:25,y:25}},playerLight:!0})};e.Star=i,e.Game=t}(this);