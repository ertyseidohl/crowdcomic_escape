!function(s){var i=function(s,i){var t=s.coq.inputter,e=s.coq.collider,h=s.coq.entities,o=(s.coq.renderer,{pos:{x:0,y:0},size:{x:0,y:0},vec:{x:0,y:0},acceleration:.4,friction:.87,maxSpeed:10,zindex:100,style:"human",visible:!0});for(var l in o)this[l]="undefined"==typeof i[l]?o[l]:i[l];this.zindex=1e3,this.boundingBox=s.coq.collider.CIRCLE,this.wallCollisions={up:!1,down:!1,left:!1,right:!1},this.health=2,this.light=i.playerLight,this.shotCooldown=0,this.shotCooldownMax=20,this.draw=function(i){this.visible&&(this.visible=!1,i.strokeStyle=s.settings.color_player_human,i.lineWidth=2*this.health,i.beginPath(),i.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,this.size.x/2,0,2*Math.PI),i.closePath(),i.stroke())},this.update=function(){this.visible=!0,(t.state(t.UP_ARROW)||t.state(t.W))&&(this.vec.y-=this.acceleration,this.vec.y<-this.maxSpeed&&(this.vec.y=-this.maxSpeed)),(t.state(t.DOWN_ARROW)||t.state(t.S))&&(this.vec.y+=this.acceleration,this.vec.y>this.maxSpeed&&(this.vec.y=this.maxSpeed)),(t.state(t.LEFT_ARROW)||t.state(t.A))&&(this.vec.x-=this.acceleration,this.vec.x<-this.maxSpeed&&(this.vec.x=-this.maxSpeed)),(t.state(t.RIGHT_ARROW)||t.state(t.D))&&(this.vec.x+=this.acceleration,this.vec.x>this.maxSpeed&&(this.vec.x=this.maxSpeed)),this.shotCooldown>0&&this.shotCooldown--,t.state(t.MOUSE_LEFT)&&0==this.shotCooldown&&(this.shotCooldown=this.shotCooldownMax,h.create(Bullet,{pos:{x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2},angle:Math.atan2(t.mouse.y-this.pos.y-this.size.y/2,t.mouse.x-this.pos.x-this.size.x/2),type:1,emitter:this})),(this.wallCollisions.left===!1&&this.vec.x<0||this.wallCollisions.right===!1&&this.vec.x>0)&&this.pos.x+this.vec.x>=0&&this.pos.x+this.vec.x+this.size.y<=s.coq.renderer.worldSize.x&&(this.pos.x+=this.vec.x),(this.wallCollisions.up===!1&&this.vec.y<0||this.wallCollisions.down===!1&&this.vec.y>0)&&this.pos.y+this.vec.y>=0&&this.pos.y+this.vec.y+this.size.y<=s.coq.renderer.worldSize.y&&(this.pos.y+=this.vec.y),this.vec.x*=this.friction,this.vec.y*=this.friction,this.light&&(this.light.pos={x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2});for(var i=s.coq.entities.all(Osacian),e=0;e<i.length;e++){var o=i[e];Math.abs(o.pos.x-this.pos.x)+Math.abs(o.pos.y-this.pos.y)<200&&o.noticePlayer(this)}},this.collision=function(s){if(s instanceof GameCollisionBox||s instanceof Osacian){if(s.collided=!0,this.pos.x<=s.pos.x+s.size.x&&this.pos.x+this.size.x/2>s.pos.x+s.size.x)for(;e.isIntersecting(this,s);)this.pos.x+=1,this.vec.x=0;if(this.pos.x+this.size.x>=s.pos.x&&this.pos.x+this.size.x/2<s.pos.x)for(;e.isIntersecting(this,s);)this.pos.x-=1,this.vec.x=0;if(this.pos.y<=s.pos.y+s.size.y&&this.pos.y+this.size.y/2>s.pos.y)for(;e.isIntersecting(this,s);)this.pos.y+=1,this.vec.y=0;if(this.pos.y+this.size.y>=s.pos.y&&this.pos.y+this.size.y/2<s.pos.y)for(;e.isIntersecting(this,s);)this.pos.y-=1,this.vec.y=0}},this.uncollision=function(s){s instanceof GameCollisionBox&&(s.collided=!1,s==this.wallCollisions.up&&(this.wallCollisions.up=!1),s==this.wallCollisions.down&&(this.wallCollisions.down=!1),s==this.wallCollisions.left&&(this.wallCollisions.left=!1),s==this.wallCollisions.right&&(this.wallCollisions.right=!1))},this.hitByBullet=function(){s.GALAXY.debugMode||(this.health-=1),0==this.health&&s.changeGameState("game lost")}};s.GamePlayer=i}(this);